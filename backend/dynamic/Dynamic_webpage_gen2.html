<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bill Splitting Interface</title>
<script
src="https://code.jquery.com/jquery-3.2.1.min.js"
integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
crossorigin="anonymous">
</script>
<script
src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
crossorigin="anonymous">
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>
</head>

<body>

<script>
(function() {
  	//for testing, using below JSON object hosted on my websys account
	var DB_call = {"USER":"Gleb Sagitov","billID":"123456789"};
	var JSONObjectURL = "http://websys3.stern.nyu.edu/~gs2723/websys/JSON_text.js";
	// the DB_call object specifies the data to be sent to server; not relevant in test case.
	$('body').html($('<div />', {class: 'container'}));
	$(".container").html("Drag People to Items")
	$('<div />',{ class: "wrapper", width: "300px", height: "300px", borderstyle: "solid", color: "#ccc", padding: "10px"}).appendTo('.container');
	$.getJSON(JSONObjectURL, DB_call)
    .done(function(data) {
      $.each( data, function( key, val ) {
		 if ( key === "items") {
			console.log(key)
			$('.wrapper').append($('<div />', {class: 'items'}));
			$('.items').css({"float":"right","width":"50%"});
			 // should be style="width: 50%, float:left
			$.each(data["items"], function(i, val){
				console.log("items")
				$('<div />', { id: val, class: "item", text: val, width: "100px", align: "right"}).appendTo('.items');
				$("#"+val).after("<br>")
				$(".item").css({"background-Color":"grey","padding":"1px","border-style":"solid","border-size":"1px"});
				$('.item').droppable({accept: ".person"})
												}
				  )
							};
		if ( key === "otherpeople") {
			console.log(key)
			$('.wrapper').append($('<div />', {class: 'people'}));
			$('.people').css({"float":"left","width":"50%"})

			$.each(data["otherpeople"], function(i, val){
				console.log("otherpeople")
				
				$('<div />', { id: val, class: "person", text: val, width: "50px"}).appendTo('.people');	$('.person').css({"background-color":"#E8B467","padding":"1px","border-style":"solid","border-size":"1px"})
				
				$('.person').draggable({containment: ".wrapper", scroll: false, snap: ".item", snapMode: "inner", revert: "invalid"});
				
				
														}
				  
				  )
									};
		  
		  								}
			
			);
      					}
		 );
    	}	
)();
</script>
<div></div>
</body>
</html>
